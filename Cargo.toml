[package]
name = "mytest"
description = "So apparently this needs to be longer or Lintian gets unhappy."
license = "MIT"
version = "0.1.0"
edition = "2021"
authors = ["This Needs To Be A Name <and_an@email.address>"]

[dependencies]

[package.metadata.deb]
name = "mytest"
priority = "optional"
section = "net"
extended-description-file = "pkg/debian/description.txt"
license-file = ["LICENSE", "0"]
depends = "$auto, passwd, libssl1.1" # your application/(pre|post|un)install script dependencies
maintainer-scripts = "pkg/debian/"
changelog = "target/debian/changelog" # this will be generated by the pkg workflow
copyright = "Copyright (c) 2022, Your Company. All rights reserved."
assets = [
    ["target/release/mytest", "/usr/bin/mytest", "755"],
]
systemd-units = { unit-name = "mytest", unit-scripts = "pkg/common", enable = false }

[package.metadata.deb.variants.ubuntu-jammy]
depends = "$auto, passwd, libssl3"

[package.metadata.deb.variants.debian-buster-arm-unknown-linux-gnueabihf]
depends = "adduser, passwd, libc6 (>= 2.28), libssl1.1"

[package.metadata.generate-rpm]
license = "BSD"
assets = [
    { source = "target/release/mytest", dest = "/usr/bin/mytest", mode = "755" },
]
# These get set using cargo-generate-rpm --set-metadata at package build time.
#post_install_script = ...
#pre_uninstall_script = ...
#post_uninstall_script = ...

# ensure that the useradd is present by requiring the package that provides it
[package.metadata.generate-rpm.requires]
shadow-utils = "*"
