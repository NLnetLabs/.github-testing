# This package is intended to 
[package]
name = "successor"
version = "0.1.0"
edition = "2021"

[dependencies]

# Stupid trick to stop Cargo searching upwards for a parent Cargo.toml.
# See:
#   - https://github.com/rust-lang/cargo/issues/4992#issuecomment-362143452
#   - https://github.com/rust-lang/cargo/issues/7871
[workspace]

[package.metadata.deb]
name = "successor"
priority = "optional"
section = "net"
extended-description-file = "pkg/debian/description.txt"
license-file = ["LICENSE", "0"]
maintainer-scripts = "pkg/debian/"
changelog = "target/debian/changelog" # this will be generated by the pkg workflow
copyright = "Copyright (c) 2022, Your Company. All rights reserved."
assets = [
    ["target/release/successor", "/usr/bin/successor", "755"],
]
replaces = "mytest"

[package.metadata.generate-rpm]
# "BSD" alone is the 3-clause license. Inheriting "license" from above causes rpmlint to
# complain with "invalid-license".
# See: https://fedoraproject.org/wiki/Licensing:Main?rd=Licensing
license = "BSD"
assets = [
    { source = "target/release/successor", dest = "/usr/bin/successor", mode = "755" },
]

# These get set using cargo-generate-rpm --set-metadata at package build time.
#post_install_script = ...
#pre_uninstall_script = ...
#post_uninstall_script = ...

[package.metadata.generate-rpm.obsoletes]
mytest = "*"